{% extends "base.html" %}
{% block title %}Actors - Dmk{% endblock %}
{% block head %}
    {{ super() }}
{% endblock %}
{% block content %}
<main role="main" class="container">
<div class="container">
    <div class="row align-items-start justify-content-between">
        <div class="col-10">
            {{actors|length}} total actors,
            {{counts['Wish']}} wish{{'es' if counts['Wish'] > 1 else ''}} pending
            {%- if counts['Eq'] > 0 %}, <span class="text-warning fw-bold">{{counts['Eq']}} Event Quest</span>{% endif %}
            {%- if counts['Kq'] > 0 %}, <span class="text-warning fw-bold">{{counts['Kq']}} Kingdom Quest</span>{% endif %}
            {%- if counts['Skip'] > 0 %}, <span class="text-warning fw-bold">{{counts['Skip']}} skip</span>{% endif %}
            {%- if counts['Abort'] > 0 %}, <span class="text-danger fw-bold">{{counts['Abort']}} abort</span>{% endif %}
        </div>
        <div class="col-2">
            <a href="{{ url_for('main.index') }}">Return to home</a>
        </div>
    </div>
</div>
<table class="table table-hover"><tbody>
{% for a in actors %}
    <tr class='clickable-row' data-href="{{ url_for('actors.actorTasks', actor_id=a.id) }}">
        <td>
            <img src="{{ url_for('actors.actorPortrait', actor_id=a.id) }}" loading="lazy" style="height: 76px; object-fit: none;">
        </td>
        <td>
            <a id="{{a.id}}"></a>
            <h4>{{a.name}}</h4>
            <form action="{{ url_for('actors.index', _anchor=a.name) }}" method="POST">
                <input type="hidden" name="actor" value="{{a.name}}"/>
                <button class="btn px-2 {{ 'btn-warning' if a.hasWish else 'btn-secondary' }}" name="wish" value="{{ '0' if a.hasWish else '1' }}" type="submit">Wish</button>
                <button class="btn px-2 {{ 'btn-warning' if a.hasSkip else 'btn-secondary' }}" name="skip" value="{{ '0' if a.hasSkip else '1' }}" type="submit">Skip</button>
                <button class="btn px-2 {{ 'btn-danger' if a.hasAbort else 'btn-secondary' }}" name="abort" value="{{ '0' if a.hasAbort else '1' }}" type="submit">Abort</button>
                <button class="btn px-2 {{ 'btn-warning' if a.hasKq else 'btn-secondary' }}" name="kq" value="{{ '0' if a.hasKq else '1' }}" type="submit" title="Kingdom Quest">
                    <i class="fa fa-shield"></i>
                </button>
                <button class="btn px-2 {{ 'btn-warning' if a.hasEq else 'btn-secondary' }}" name="eq" value="{{ '0' if a.hasEq else '1' }}" type="submit" title="Event Quest">
                    <i class="fa fa-file-text-o"></i>
                </button>
            <!-- <button class="btn px-2 {{ 'btn-danger' if a.hasForce else 'btn-secondary' }}" name="force" value="{{ '0' if a.hasForce else '1' }}" type="submit">Force</button> -->
            </form>
        </td>
        <td>
            {% if a.hasTarget %}<img src="{{ url_for('actors.actorTaskImg', actor_id=a.name, fname=a.target) }}" loading="lazy">{% else %}None{% endif %}
        </td>
    </tr>
{% endfor %}
</tbody></table>
</main>
{% endblock %}
{% block footer %}
<script>
    $(function() {
        $(".clickable-row").click(function() {
            window.location = $(this).data("href");
        });
    });
</script>
{% endblock %}
